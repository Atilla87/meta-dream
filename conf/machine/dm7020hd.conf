#@TYPE: Machine
#@NAME: Dreambox DM7020HD
#@DESCRIPTION: Machine configuration for the Dreambox DM7020HD

OPENPLI_FEATURES = "ci dvd usbconsole"
MACHINE_FEATURES += "modem wlan kernelwifi externalwifi dvb-c blindscan-dvbc hdmicec"
MACHINE_FEATURES += "libpassthrough"

require conf/machine/include/dreambox-hw-ecc.inc

DREAMBOX_ERASE_BLOCK_SIZE = "${@bb.utils.contains('EXACTNAME', 'dm7020hd', '0x40000', '0x20000', d)}"
DREAMBOX_FLASH_SIZE = "0x40000000"
DREAMBOX_SECTOR_SIZE = "${@bb.utils.contains('EXACTNAME', 'dm7020hd', '4096', '2048', d)}"
MKUBIFS_ARGS = "${@bb.utils.contains('EXACTNAME', 'dm7020hd', '-m 4096 -e 248KiB -c 1640 -x favor_lzo -F', '-m 2048 -e 124KiB -c 3320 -x favor_lzo -F', d)}"
UBINIZE_ARGS = "${@bb.utils.contains('EXACTNAME', 'dm7020hd', '-m 4096 -p 256KiB -s 4096', '-m 2048 -p 128KiB -s 2048', d)}"
UBINIZE_VOLSIZE = "${@bb.utils.contains('EXACTNAME', 'dm7020hd', '397MiB', '402MiB', d)}"
UBINIZE_DATAVOLSIZE = "${@bb.utils.contains('EXACTNAME', 'dm7020hd', '574MiB', '569MiB', d)}"

require conf/machine/include/dreambox-part-1024mb.inc
require conf/machine/include/dreambox-ubi.inc
require conf/machine/include/dreambox-mips32el.inc

PREFERRED_VERSION_linux-dreambox = "3.2"

DVBMEDIASINK_CONFIG = "--with-pcm --with-wma --with-wmv --with-dtsdownmix --with-eac3"

CHIPSET = "bcm7405"

MACHINE_EXTRA_RRECOMMENDS += "dreambox-enigma2-config"
